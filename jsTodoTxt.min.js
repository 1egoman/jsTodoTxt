/*!
 * jsTodoTxt v0.3.1
 * Built on 2013-10-02
 * https://github.com/jmhobbs/jsTodoTxt
 *
 * Copyright 2011-2013, John Hobbs
 * Licensed under the MIT license.
 * https://github.com/jmhobbs/jsTodoTxt/blob/master/LICENSE
 */function TodoTxtItem(a){this.reset=function(){this.text=null,this.priority=null,this.complete=!1,this.completed=null,this.date=null,this.contexts=null,this.projects=null},this.dateString=function(){return this.date?this.date.getFullYear()+"-"+(this.date.getMonth()+1<10?"0":"")+this.date.getMonth()+"-"+(this.date.getDate()<10?"0":"")+this.date.getDate():null},this.completedString=function(){return this.completed?this.completed.getFullYear()+"-"+(this.completed.getMonth()+1<10?"0":"")+this.completed.getMonth()+"-"+(this.completed.getDate()<10?"0":"")+this.completed.getDate():null},this.toString=function(){var a=this.text;return null!=this.date&&(a=this.dateString()+" "+a),null!=this.priority&&(a="("+this.priority+") "+a),this.complete&&null!=this.completed&&(a="x "+this.completedString()+" "+a),null!=this.projects&&(a=a+" +"+this.projects.join(" +")),null!=this.contexts&&(a=a+" @"+this.contexts.join(" @")),a},this.parse=function(a){this.reset(),a=a.replace(TodoTxt._trim_re,""),a=a.replace("\r","");var b=TodoTxt._complete_re.exec(a);if(null!=b){this.complete=!0;var c=b[1].split("-");this.completed=new Date(c[0],c[1],c[2]),a=a.replace(TodoTxt._complete_replace_re,"")}var d=TodoTxt._priority_re.exec(a);null!=d&&(this.priority=d[1],a=a.replace(TodoTxt._priority_replace_re,""));var e=TodoTxt._date_re.exec(a);if(null!=e){var c=e[1].split("-");this.date=new Date(c[0],c[1],c[2]),a=a.replace(TodoTxt._date_replace_re,"")}var f=a.match(TodoTxt._context_re);if(null!=f){this.contexts=[];for(i in f)this.contexts.push(f[i].substr(1));a=a.replace(TodoTxt._context_replace_re," ")}var g=a.match(TodoTxt._project_re);if(null!=g){this.projects=[];for(i in g)this.projects.push(g[i].substr(1));a=a.replace(TodoTxt._project_replace_re," ")}if(a=a.replace(TodoTxt._trim_re,""),this.text=a,""==this.text)throw new Exception("Empty Task")},"string"==typeof a?this.parse(a):this.reset()}var TodoTxt={_trim_re:/^\s+|\s+$/g,_complete_re:/^x\s([0-9]{4}-[0-9]{1,2}-[0-9]{1,2})\s+/i,_complete_replace_re:/^x\s([0-9]{4}-[0-9]{1,2}-[0-9]{1,2})\s+/i,_date_re:/^([0-9]{4}-[0-9]{1,2}-[0-9]{1,2})/,_date_replace_re:/^[0-9]{4}-[0-9]{1,2}-[0-9]{1,2}\s*/,_priority_re:/^\(([A-Z])\)/,_priority_replace_re:/^\([A-Z]\)\s*/,_context_re:/@(\S+)/g,_context_replace_re:/\s*@\S+\s*/g,_project_re:/\+(\S+)/g,_project_replace_re:/\s*\+\S+\s*/g,parse:function(a){var b=[],c=a.split("\n");for(i in c)try{b.push(new TodoTxtItem(c[i]))}catch(d){}return b},parseLine:function(a){return new TodoTxtItem(a)},render:function(a){var b=[];for(i in a)b.push(a[i].toString());return b.join("\n")},renderItem:function(a){return a.toString()}};